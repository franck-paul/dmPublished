"use strict";dotclear.dmPublishedPostsCount=()=>{dotclear.services("dmPublishedPostsCount",(e=>{try{const t=JSON.parse(e);if(!t?.success)return void console.log(dotclear.debug&&t?.message?t.message:"Dotclear REST server error");if(t?.payload.ret){const e=t.payload.nb;dotclear.badge($("#published-posts"),{id:"dmrp",value:e,remove:void 0!==e&&0===e,type:"soft"})}}catch(e){console.log(e)}}),(e=>{console.log(e)}),!0,{json:1})},dotclear.dmPublishedPostsView=(e,t="toggle",s=null)=>{if(null==$(e).attr("id"))return;const l=$(e).attr("id").substr(4),o=`dmrpe${l}`;let d=document.getElementById(o);d?($(d).toggle(),$(e).toggleClass("expand")):dotclear.getEntryContent(l,(t=>{t?(d=document.createElement("li"),d.id=o,d.className="expand",$(d).append(t),$(e).addClass("expand"),e.parentNode.insertBefore(d,e.nextSibling)):$(e).toggleClass("expand")}),{clean:s.metaKey,length:300})},$((()=>{$.expandContent({lines:$("#published-posts li.line"),callback:dotclear.dmPublishedPostsView}),$("#published-posts ul").addClass("expandable"),dotclear.dmPublishedPostsCount(),dotclear.dbPublishedPostsCount_Timer=setInterval(dotclear.dmPublishedPostsCount,3e5)}));
